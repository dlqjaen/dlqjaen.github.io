## 이벤트 처리

### 4.1 인라인 이벤트 처리

Vue.js의 HTML템플릿에서는 v-on 디렉티브를 이용하여 이벤트를 처리할 수 있습니다.

```
<div id="example">
  <p><input type="text" v-model="amount" /></p>
  <p>
    <button v-on:click="blance += perseInt(amount)">예금</button>
    <button v-on:click="blance -= perseInt(amount)">인출</button>
  </p>
  <h3>계좌 잔고 : {{blance}}</h3>
</div>
<script>
  var vm = new Vue({
    el: '#example',
    data : {
      amount: 0,
      balance : 0
    }
  })
</script>
```

v-on 이벤트는 @를 축약어로 사용할 수 있습니다. 
> ex) v-on:click -> @click

v-on:click="blance += parselnt(amount)" 코드는 이벤트를 처리하기위한 검증을 모두 반영하기 힘들기 떄문에 현실적인 방법은 아닙니다.
따라서 Vue 인스턴스에 등록해둔 메서드를 이벤트 처리에 연결하여 사용할 수 있습니다.

### 4.2 이벤트 핸들러 메서드

```
<button @click="deposit">예금</button>
<button @click="withdraw">인출</button>
<h3>계좌 잔고 : {{balance}}</h3>

<script>
  methods : {
    deposit : function(e){
      var amt = parseInt(this.amount);
      if(amt <= 0>) {
        alert("0보다 큰 값을 예금해야 합니다.");
      } else {
        this.blance += amt;
      }
    },
    withdraw : function(e){
      var amt = parseInt(this.amount);
      if(amt <= 0){
        alert("0보다 큰 값을 인출 할 수 있습니다.")
      } else if(amt > this.blance){
        alert("잔고보다 많은 금액을 인출할 수 없습니다.")
      } else {
        this.blance -= amt;
      }
    }
  }
</script>
```

Vue 인스턴스에 deposit, withdraw 메서드를 작성하여 유효성 검사 기능을 추가하였습니다.

### 4.3 이벤트 객체

이벤트를 처리하는 메서드는 첫 번째 인자로 이벤트 객체를 전달받습니다.

Vue.js 이벤트 객체는 W3C 표준 HTML DOM Event 모델을 그대로 따르면서 추가적인 속성을 제공합니다.

#### 이벤트 객체의 주요 공통 속성

- target : 이벤트가 발생한 HTML 요소를 반환합니다.
- currentTarget : 이벤트리스너가 이벤트를 발생시키는 HTML 요소를 반환합니다.
- path : 배열값, 이벤트 발생 HTML 요소로부터 document, window 객체로까지 거슬러 올라가는 경로를 나타냄.
- bubbles : 현재 이벤트가 버블링을 일으키는 이벤트인지 여부를 리턴합니다.
- cancelable : 기본 이벤트를 방지할 수 있는지 여부를 리턴합니다.
- defaultPrevented : 기본 이벤트가 방지되었는지 여부를 나타냅니다.
- eventPhase : 이벤트 흐름의 단계를 나타냅니다.
  1. 포착(CAPTURING_PATH)
  2. 이벤트 발생(AT_TARGET)
  3. 버블링(BUBBLING_PHATH)
- srcElement : IE에서 사용되던 속성으로 target과 동일한 속성입니다.

#### 키보드 이벤트 관련 속성

- altKey : ALT 키가 눌러졌는지 여부를 나타냅니다.(true/false)
- shiftKey : SHIFT 키가 눌러졌는지 여부를 나타냅니다.(true/false)
- ctrlKey : CTRL 키가 눌러졌는지 여부를 나타냅니다.(true/false)
- metaKey : 메타키가 눌러졌는지 여부를 나타냅니다. 윈도우에서는 Window Key, macOS에서는 Commend Key 입니다.
- key : 이벤트에 의해 나타나는 키의 값을 리턴합니다.(대소문자를 구분합니다.)
- code : 이벤트를 발생시킨 키의 값을 리턴 합니다.
- keyCode : 이벤트를 발생시킨 키보드의 고유 키코드를 반환합니다.
- charCode : keypress 이벤트가 발생했을 때 Unicode 캐릭터 코드를 리턴합니다.
location : 디바이스에서의 키 위치값, 일반 키보드는 이 값이 모두 0이므로 이용할 수 없습니다.

#### 마우스 이벤트 관련 속성

- altKey, shiftKey, ctrlKey, metaKey : 키보드 이벤트 속성 참조
- button : 이벤트를 발생시킨 마우스 버튼
  - 0 : 마우스 왼쪽 버튼
  - 1 : 마우스 휠
  - 2 : 마우스 오른쪽 버튼
- buttons : 마우스 이벤트가 발생한 후에 눌러져 있는 마우스 버튼의 값을 리턴합니다.
  - 1 : 마우스 왼쪽 버튼
  - 2 : 마우스 오른쪽 버튼
  - 3 : 마우스 휠
  - 4 : 4번째 마우스 버튼
  - 5 : 5번째 마우스 버튼
  - ex) 마우스의 오른쪽 버튼, 휠을 누르고 있는 상태에서 왼쪽 버튼을 클릭할 경우 이 값은 6을 리턴합니다.
  - clientX, clientY : 마우스 이벤트가 일어났을 때의 뷰포트(viewPort) 영역상의 좌표, 이 좌표는 스크롤바를 내리더라도 좌푯값에 영향을 받지 않습니다.
  - layerX, layerY : 나우스 이벤트가 발생한 HTML 요소 영역상의 좌표, 이 좌표는 스크롤바를 내리더라도 좌푯값에 영향을 받지 않습니다.
  - offsetX, offsetY : 마우스 이벤트가 발생한 HTML 요소 영역상에서의 좌표(IE 브라우저 사용)
  - pageX, pageY : 마우스 이벤트가 일어났을 때의 HTML 문서 영역상의 좌표
  - screenX, screenY : 마우스 이벤트가 일어났을 때의 모니터 화면 영역상의 좌표

  #### 이벤트 객체의 주요 메서드

  - preventDefault() : 기본 이벤트의 자동 실행을 중지시킵니다.
  - stopPropagation() : 이벤트의 전파를 막습니다.

  ### 4.4 기본 이벤트

  HTML 문서나 요소가 기본적으로 어떠한 기능을 실행하도록 설정되어 있는 이벤트를 기본 이벤트라고 합니다.

  #### 대표적인 기본이벤트
  
  - &lt;a&gt; 요소를 클릭 했을 때 href 특성의 결로로 페이지를 이동시키는 이벤트
  - 브라우저 화면을 마우슬 오른쪽 마우스 클릭했을 때 나타나는 내장 컨텍스트 메뉴
  - &lt;form&gt;요소 내부의 submit 버튼을 클릭했을 때 &lt;form&gt; 요소의 action 특성에 지정된 경로로 method 특성에 지정된 방식으로 내용을 전송하는 이벤트
  - &lt;input type='text' .../&gt; 요소에 키보드를 누르면 입력한 문자가 텍스트 박스에 나타나는 이벤트.

기본 이벤트는 HTML마크업 만으로도 미리 정의된 기능을 실행 할 수 있기 떄문에 기본 이벤트를 중지시킬 수 있는 방법을 알아두어야 합니다.

```
method : {
  eventStop : function(e){
    e.preventDefault();
  }
}
```

개발자가 메서드에 매번 e.preventDefault()를 작성하기에는 한계가 있습니다. 이러한 이벤트 관련 문제를 쉽게 해결하기 위해서 Vue.js에서는 이벤트 수식어라는 것을 제공합니다.

```
<div v-on:contextmenu.prevent="ctxStop">
...
</div>
```

위의 코드처럼 이벤트 수식어를 사용하면 e.prventDefaullt()를 매번 사용하지 않아도 됩니다.
하지만 조건 논리식의 결과에 따라 기본 이벤트를 중지시켜야 할 경우에는 e.prventDefaullt()를 직접 호출해야 할 경우도 있습니다.

### 4.5 이벤트 전파와 버블링

#### HTML 문서의 이벤트 처리 3단계

1. 문서 내의 요소에서 이벤트가 발생했을 때 HTML 문서의 밖에서부터 이벤트를 발생시킨 HTML 요소까지 포착해 들어가는 이벤트 포착 단계(CAPTUREING_PHASE)
2. 이벤트를 발생시킨 요소에 다다르면 요소의 이벤트에 연결된 함수를 직접 호출시키는 이벤트 발생(RAISING_PHASE: AT_TARGET)
3. 이벤트가 발생한 요소로부터 상위 요소로 거슬러 올라가면서 동일한 이벤트를 호출시키는 버블링(BUBBLING_PHASE)

![이벤트 전파에 관한 이미지](http://cfile2.uf.tistory.com/image/265FB641569499162CE4EC)

내가 원하는 요소의 이벤트만 실행시키고자 할 경우 이벤트 전파를 막는 방법을 알아야합니다. 이 경우 stopPropagation() 메서드를 호출합니다.

```
methods : {
  outerClick : function(e){
    e.stopPropagation();
  },
  innerClick : function(e){
    e.stopPropagation();
  }
}
```

위의 코드와 같이 stopPropagation 메서드를 직접 호출 할 수도 있지만 이벤트 수식어로 대체 할 수 있습니다.

```
<div id="outer" @click.stop="outerClick">
  <div id="inner" @click.stop="innerClick"></div>
</div>
```

- .stop : 이벤트 전파를 중단시킵니다.
- .capture : CAPTURING_PHASE 단계에서만 이벤트가 발생합니다.
- .self : RAISING_PHASE 단계일 때만 이벤트가 발생합니다.

이벤트 수식어들은 단독으로 사용할 수도 있지만 이어붙여 여러개를 사용할 수도 있습니다.

```
<div @click.capture.stop="outerClick"></div>
```

### 4.6 이벤트 수식어

#### 4.6.1 once 수식어

once 수식어는 이벤트를 한 번만 실행시킵니다.

```
<button v-on:click.once="specialEvent"></button>
```

위 코드의 버튼을 클릭하면 단 한번만 실행이 됩니다.

#### 4.6.2 키코드 수식어

키보드의 키를 누를 떄 고유의 키코드 값을 가질 때만 이벤트를 발생시킬 수 있습니다.

```
<p>
  이름 : <inpiut type="text" v-omn:keyup="search">
</p>

<script>
  methods : {
    search : function(e){
      if(e.keyCode === 13){
        var val = e.target.value;
        if(val.length >= 2){
          this.fetchContacts();
        }else{
          this.contactlist = [];
        }
      }
    }
  }
</script>
```

keyup 이벤트가 발생하면 search메서드를 호출하고 엔터키(keyCode 13)가 keyup되었는지 확인하여 함수를 실행합니다.

```
<p>
  이름 : <input type="text" v-on:keyup.13="search">
</p>

<script>
  methods : {
    search : function(e){
      var val = e.target.value;
      if(val.length >- 2){
        this.fetcjContacts();
      } else {
        this.contactlist = [];
      }
    }
  }
</script>
```

위의 코드와 같이 수식어를 적용하여 코드를 간략하게 만들 수 있습니다. 또 키코드를 다 기억할 수 없기 때문에 Vue.js에서는 키코드 별칭을 제공합니다.

- .enter
- .tab
- .delete
- .esc
- .space
- .up
- .down
- .left
- .right
- .ctrl
- .alt
- .shift
- .meta

또 키코드를 여러가지 조합하여 사용 할 수도 있습니다.
Crtl + C 를 구현 하려면 v-on:keyup.ctrl.67="copy" 로 지정할 수 있습니다.

#### 4.6.3 마우스 버튼 수식어

마우스 버튼도 수식어를 제공합니다.

- .left
- .right
- .middle

